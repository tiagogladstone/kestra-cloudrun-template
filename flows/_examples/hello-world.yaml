# Flow de Exemplo: Hello World
# Este flow demonstra a estrutura b√°sica

id: hello-world
namespace: exemplos
description: |
  Flow de exemplo que demonstra a estrutura b√°sica.
  - Recebe um nome como input
  - Chama um worker (simulado com log)
  - Retorna resultado

inputs:
  - id: nome
    type: STRING
    description: Nome para cumprimentar
    required: true
    defaults: "Mundo"

tasks:
  # Passo 1: Log do in√≠cio
  - id: log_inicio
    type: io.kestra.plugin.core.log.Log
    message: "üöÄ Iniciando flow para: {{ inputs.nome }}"

  # Passo 2: Simular chamada a worker
  # Em produ√ß√£o, substituir por io.kestra.plugin.core.http.Request
  - id: processar
    type: io.kestra.plugin.core.log.Log
    message: "üì¶ Processando: {{ inputs.nome }}"
    dependsOn:
      - log_inicio

  # Passo 3: Gerar resultado
  - id: resultado
    type: io.kestra.plugin.core.output.OutputValues
    values:
      mensagem: "Ol√°, {{ inputs.nome }}!"
      processado_em: "{{ now() }}"
    dependsOn:
      - processar

  # Passo 4: Log do fim
  - id: log_fim
    type: io.kestra.plugin.core.log.Log
    message: "‚úÖ Flow conclu√≠do: {{ outputs.resultado.values.mensagem }}"
    dependsOn:
      - resultado

# Handler de erro (opcional mas recomendado)
errors:
  - id: notificar_erro
    type: io.kestra.plugin.core.log.Log
    message: "‚ùå Flow falhou: {{ flow.id }} - Erro: {{ error.message }}"
